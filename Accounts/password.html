<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Password</title>
    <link rel="stylesheet" href="transferstyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="password.css">
</head>

<body>
    <header>
        <div class="heading">
            <img src="netflixlogo.png" alt="">
            <a href="/Accounts/Account.html">
                <h3>Back</h3>
            </a>
        </div>
    </header>
    <main>
        <div class="container">
            <h2>Change Password</h2>

            <h4>Protect your account with a unique password at least 6 characters long.</h4>

            <input type="password" id="current-pass" placeholder="Current password" required>

            <input type="password" id="new-pass" placeholder="New password" required>

            <input type="password" id="reenter-new-pass" placeholder="Re-enter new password" required>


            <div class="checkbox-wrapper-40"><label
                    style="display: flex; align-items: center; justify-content: ce; gap: 1rem;"><input
                        type="checkbox" id="signout-checkbox"/><span class="checkbox">
                        <p>Signout from all devices</p>
                    </span></label>
            </div>


            <div class="btn"><button type="submit" id="submit-btn" onclick="changePassword()">Save</button>
                <button type="submit" id="cancel-btn" onclick="window.location.href = 'Account.html'">Cancel</button>
            </div>

        </div>
    </main>

    <footer>
        <ul>
            <li><a href="#">Term of Use</a></li>
            <li><a href="#">Privacy</a></li>
            <li><a href="#">Coockie Preferences</a></li>
            <li><a href="#">Corporate information</a></li>
        </ul>
    </footer>


    <script>
        function changePassword() {
                const currentPassInput = document.getElementById('current-pass');
                const newPassInput = document.getElementById('new-pass');
                const reenterNewPassInput = document.getElementById('reenter-new-pass');

                const currentPass = currentPassInput.value;
                const newPass = newPassInput.value;
                const reenterNewPass = reenterNewPassInput.value;

                const storedPass = localStorage.getItem('password1');

                // Validate the input
                if (!currentPass || !newPass || !reenterNewPass) {
                    alert('All fields are required.');
                    return;
                }

                if (newPass.length < 6) {
                    alert('New password must be at least 6 characters long.');
                    return;
                }

                if (newPass !== reenterNewPass) {
                    alert('New passwords do not match.');
                    return;
                }

                if (currentPass !== storedPass) {
                    alert('Current password is incorrect.');
                    return;
                }

                if (newPass === storedPass) {
                    alert('New password cannot be the same as the old password.');
                    return;
                }

                // Update the password in localStorage
                localStorage.setItem('password1', newPass);
                alert('Password changed successfully.');

                // Optionally handle the sign out from all devices
                const signoutCheckbox = document.getElementById('signout-checkbox');
                if (signoutCheckbox.checked) {
                    console.log('Sign out from all devices.');
                }

                // Clear the input fields
                currentPassInput.value = '';
                newPassInput.value = '';
                reenterNewPassInput.value = '';
            }

            // Attach event to Cancel button
            document.getElementById('cancel-btn').addEventListener('click', function () {
                alert('Password change canceled.');
            });

    </script>

</body>

</html>